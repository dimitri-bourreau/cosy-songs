<!doctype html>
<html>
<head>
    <title>Cosy Songs</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
			(async () => {
				const jsonFile = await fetch('./json-data/playlists.json');
				const {numberOfEpisodes, numberOfSongs, playlists} = await jsonFile.json();

				const songsNumber = document.getElementById('songs-number');
				songsNumber.textContent = numberOfSongs;

				const playlistsNumber = document.getElementById('playlists-number');
				playlistsNumber.textContent = numberOfEpisodes;

				const table = document.getElementById('table');
				for (playlist of playlists) {
					const playlistTr = document.createElement('tr');
					const episodeTitle = document.createElement('td');
					const episodeLink = document.createElement('a');
					episodeLink.className = 'text-[#ff1a2f] underline'
					episodeLink.href = playlist.episodeLink;
					episodeLink.textContent = `${playlist.episodeTitle}`;
					episodeTitle.className = 'px-3 py-4 text-sm text-gray-500';
					episodeTitle.appendChild(episodeLink);
					playlistTr.className = "flex flex-col sm-:flex-row"
					playlistTr.appendChild(episodeTitle);

					const songs = document.createElement('td');
					songs.className = 'relative py-4 pr-3 text-sm font-medium text-gray-900'
					const songsList = document.createElement('ul');
					for (song of playlist.songs) {
						const {title, artist} = song;
						const imagesClassName = 'inline w-4 h-4 mr-2';
						const songLi = document.createElement('li');
						const artistSpan = document.createElement('span');
						const titleSpan = document.createElement('span');
						const youTubeLink = document.createElement('a');
						const youTubeImg = document.createElement('img');
						const spotifyLink = document.createElement('a');
						const spotifyImg = document.createElement('img');
						const appleMusicLink = document.createElement('a');
						const appleMusicImg = document.createElement('img');
						const deezerLink = document.createElement('a');
						const deezerImg = document.createElement('img');

						artistSpan.className = 'font-bold';
						artistSpan.textContent = `${artist} : `;

						titleSpan.textContent = title;

						youTubeImg.className = imagesClassName;
						youTubeImg.src = 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fvectorified.com%2Fimage%2Fyoutube-logo-vector-12.png&f=1&nofb=1&ipt=b0e1f9e73a5c0770afb5b41de55e4f9435de02a0bc692f57a24770b069b48697&ipo=images';
						youTubeImg.alt = "YouTube";
						youTubeLink.href = `https://www.youtube.com/results?search_query=${artist}+${title}`;
						youTubeLink.target = '_blank';
						youTubeLink.appendChild(youTubeImg)

						spotifyImg.className = imagesClassName;
						spotifyImg.src = 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fcdn.freelogovectors.net%2Fwp-content%2Fuploads%2F2023%2F04%2Fspotify_logo-freelogovectors.net_-180x135.png&f=1&nofb=1&ipt=14e2b9e554c357509221f7b378c0a746850633ba642214d52772658389b5f8e3&ipo=images';
						spotifyImg.alt = 'Spotify';
						spotifyLink.href = `https://open.spotify.com/search/${artist}%20${title}`;
						spotifyLink.target = '_blank';
						spotifyLink.appendChild(spotifyImg);

						appleMusicImg.className = imagesClassName;
						appleMusicImg.src = 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.pngall.com%2Fwp-content%2Fuploads%2F13%2FApple-Music-Logo-PNG-180x180.png&f=1&nofb=1&ipt=4638cc1a3c0cdc3d4d3e0078b81760feeb3da3b0fe5e70783e53256b6fd0206a&ipo=images';
						appleMusicImg.alt = 'Apple Music';
						appleMusicLink.href = `https://music.apple.com/fr/search?term=${artist}%20${title}`;
						appleMusicLink.target = '_blank';
						appleMusicLink.appendChild(appleMusicImg);

						deezerImg.className = imagesClassName;
						deezerImg.src = 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fpageflows.imgix.net%2Fmedia%2Flogos%2FDeezer.jpg%3Fauto%3Dcompress%26ixlib%3Dpython-1.1.2%26s%3Daaf38e66a73fc6438c9a24418f3c032c&f=1&nofb=1&ipt=cc8f02144561a680357fa3266c57456807091214c1f9d7f212da092c18381051&ipo=images';
						deezerImg.alt = 'Deezer';
						deezerLink.href = `https://www.deezer.com/search/${artist}%20${title}`;
						deezerLink.target = '_blank';
						deezerLink.appendChild(deezerImg);

						songLi.appendChild(youTubeLink);
						songLi.appendChild(spotifyLink);
						songLi.appendChild(appleMusicLink);
						songLi.appendChild(deezerLink);
						songLi.appendChild(artistSpan);
						songLi.appendChild(titleSpan);
						songsList.appendChild(songLi)
					}
					songs.appendChild(songsList);
					playlistTr.appendChild(songs);

					table.appendChild(playlistTr);
				}
			})()
    </script>
</head>

<body class="flex flex-col gap-4 items-center p-10">
<div class="flex justify-center items-center flex-col">
    <h1 class="text-3xl text-[#ff1a2f] font-bold">Cosy Songs</h1>
    <p class="text-sm"><span id="playlists-number"></span> épisodes - <span id="songs-number"></span> musiques</p>
    <a href="https://www.youtube.com/playlist?list=PL91AuLITLu4Q_7r7LA9-LwhUIYP64eEZq"
       class="text-[#ff1a2f] underline mt-4">
        Playlist YouTube des musiques
        <img class="w-5 h-5 inline rounded-sm"
             src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fvectorified.com%2Fimage%2Fyoutube-logo-vector-12.png&f=1&nofb=1&ipt=b0e1f9e73a5c0770afb5b41de55e4f9435de02a0bc692f57a24770b069b48697&ipo=images"
             alt="YouTube"/>
    </a>
    <p class="text-xs">(épisodes 1 à 4, en cours)</p>
</div>


<div class="px-4 sm:px-6 lg:px-8">
    <div class="mt-8 flow-root">
        <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
                <table class="w-full text-left">
                    <thead>
                    <tr>
                        <th scope="col"
                            class="hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900">
                            Épisodes
                        </th>
                        <th scope="col"
                            class="hidden relative isolate py-3.5 pr-3 text-left text-sm font-semibold text-gray-900">
                            Musiques
                        </th>
                    </tr>
                    </thead>
                    <tbody id="table" class="divide-y divide-gray-200">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>
